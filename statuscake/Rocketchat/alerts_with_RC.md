# Integrating StatusCake Alerts with Rocket.Chat

This guide walks you through sending **StatusCake uptime alerts** directly to a Rocket.Chat channel using Rocket.Chat's Incoming Webhook integration and a custom script.

---

## Step 1: Create a Rocket.Chat Incoming Webhook Integration

1. **Navigate to Integrations:**
   - In Rocket.Chat, go to **Administration ‚Üí Integrations ‚Üí New Integration ‚Üí Incoming WebHook**.

2. **Fill in Mandatory Fields:**
   - **Post to Channel:** Choose the channel where alerts should appear (e.g., `#alerts`).
   - **Name:** Give the integration a name (e.g., `StatusCake Alerts`).
   - **Post as:** Select a username for posting alerts (e.g., `StatusCakeBot`).

3. **Enable the Script:**
   - Toggle **Script Enabled** to `ON`.

4. **Paste the Following Script in the Script Section:**

   ```javascript
   class Script {
     process_incoming_request({ request }) {
       const data = request.content;
       const testName = data.Name || 'Unnamed Test';
       const testURL = data.URL || 'No URL provided';
       const status = (data.Status || 'Unknown').toUpperCase();
       const statusCode = data.StatusCode || 'N/A';
       const checkRate = data.Checkrate || 'N/A';
       const tags = data.Tags || '';
       const testID = data.TestID || '';
       const statusCakeLink = `https://app.statuscake.com/UptimeStatus.php?tid=${testID}`;

       // Determine mention
       let mention = '';
       if (tags.includes('billy.li')) {
         mention = '@billy.li';
       } else {
         mention = '@here';
       }

       // Format based on status
       let prefix, more;
       if (status === 'DOWN') {
         prefix = 'üö® *StatusCake Alert Received* üö®\n';
         more = '\nIssue detected! Please check immediately.';
       } else if (status === 'UP') {
         prefix = '‚úÖ *Monitor Back To Normal* ‚úÖ\n';
         more = '\nBack to normal now!';
       } else {
         prefix = `‚ÑπÔ∏è *StatusCake Update* ‚ÑπÔ∏è\n`;
         more = '';
       }

       // Main message
       const msg =
         `${prefix}${mention}, Monitor [${testName}](${testURL}) is *${status}*.\n` +
         `Status Code: ${statusCode}\n` +
         `Check Rate: ${checkRate} seconds\n` +
         `Link: [View in StatusCake](${statusCakeLink})${more}`;

       return { content: { text: msg } };
     }
   }
```

5. **Save the integration** and copy the Webhook URL generated by Rocket.Chat.



## Step 2: Create a Contact Group in StatusCake

1. **Log in to StatusCake** and navigate to **User Details ‚Üí Contact Groups**.
2. **Create a new contact group**:
    - **Name:** Enter a meaningful name (e.g., `RocketChat Alerts`).
    - **Webhook URL:** Paste the Rocket.Chat Webhook URL you copied earlier into the **Webhook URL** field (this is the last field).
3. **Save** the contact group.

---

## Step 3: Add Contact Group to Your StatusCake Test

1. Go to your **StatusCake test settings** for the uptime check you want to integrate.
2. In the **Alert Settings** section, add the contact group you just created.
3. **Save** the test.

---

